var answerOptions=$("<div id='answerOptions'></div>"),showOrigin=$("<button id='showOrigin'>"+showOriginI18n+"</button>"),showTest=$("<button id='showTest'>"+showTestI18n+"</button>"),activeInputName=0;$(document).ready(function(){var b=$("#solution").text().split("\\\\");var d=$("#solution").text().split("\\\\");shuffle(d);var f=0;for(e=0;e<b.length;e++){if(b[e].length>f){f=b[e].length}}var a=$("#text").text();var c="<p>"+a.replace(/{{/g,'<input type="text" size="'+f+'" name="').replace(/}}/g,'" class="testInput">').replace(/\\n\\n/g,"</p><p>").replace(/\\n/g,"</p><p>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"</p><p>")+"</p>";var h="<p>"+a.replace(/{{(\d+)}}/g,function(i,j){return"<b>"+b[j]+"</b>"}).replace(/\\n\\n/g,"</p><p>").replace(/\\n/g,"</p><p>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"</p><p>")+"</p>";$("#text").html(c);$("#origin").html(h);$(".testInput").focus(function(){$(this).css("background-color","cornsilk");activeInputName=document.activeElement.name});$(".testInput").focusout(function(){var j=$(this).val();var i=$(this).attr("name");if(j==b[i]){$(this).css("background-color","green")}else{$(this).css("background-color","red")}});$(".testInput").on("input",function(){var j=$(this).val();var i=$(this).attr("name");if(j==b[i]){$(this).css("background-color","green")}});answerOptions.prependTo("#mainColumn");showOrigin.appendTo("#control");showTest.appendTo("#control").hide();for(var e=0;e<d.length;e++){var g=$("<span class='draggable'>"+d[e]+"</span><span> </span>");g.appendTo(answerOptions)}$("span").draggable({revert:true});$(".testInput").droppable({drop:function(i,j){if(b[$(this).attr("name")]==$(j.draggable).text()){this.value=$(j.draggable).text();$(this).css("background-color","green");$(j.draggable).css("background-color","transparent").css("color","transparent")}}});showOrigin.click(function(){showOrigin.hide();showTest.show();$("#text").hide();$("#origin").show()});showTest.click(function(){showTest.hide();showOrigin.show();$("#origin").hide();$("#text").show()})});
var showOrigin=$("<button id='showOrigin'>"+showOriginI18n+"</button>"),showTest=$("<button id='showTest'>"+showTestI18n+"</button>"),activeInputName=0;$(document).ready(function(){var h=$("#solution").text().split("\\\\");var e=0;for(c=0;c<h.length;c++){if(h[c].length>e){e=h[c].length}}var k=$("#text").text();var m=0;function f(){m++;var i="</p><div class='answerOptions' id='"+m+"'></div><p>";return i}var g="<div class='answerOptions' id='"+m+"'></div><p>"+k.replace(/\{\{/g,'<input type="text" size="'+e+'" name="').replace(/\}\}/g,'" class="testInput">').replace(/\\\\/g,f)+"</p>";var b="<p>"+k.replace(/\{\{(\d+)\}\}/g,function(i,j){return h[j]}).replace(/\\\\/g,"</p><p>")+"</p>";$("#text").html(g);$("#origin").html(b);$(".testInput").focus(function(){$(this).css("background-color","cornsilk");activeInputName=document.activeElement.name});$(".testInput").focusout(function(){var j=$(this).val();var i=$(this).attr("name");if(j==h[i]){$(this).css("background-color","green")}else{$(this).css("background-color","red")}});$(".testInput").on("input",function(){var j=$(this).val();var i=$(this).attr("name");if(j==h[i]){$(this).css("background-color","green")}});showOrigin.appendTo("#control");showTest.appendTo("#control").hide();sentences=k.split("\\\\");for(var c=0;c<sentences.length;c++){var l=sentences[c].split(/\}\}.*?\{\{/);l[0]=l[0].replace(/.*\{\{/,"");l[l.length-1]=l[l.length-1].replace(/\}\}.*/,"");var n=[];for(var a=0;a<l.length;a++){n[a]=a}shuffle(n);for(var a=0;a<l.length;a++){var d=$("<span class='draggable'>"+h[l[n[a]]]+"</span><span> </span>");d.appendTo($("#"+c))}}$("span").draggable({revert:true});$(".testInput").droppable({drop:function(i,j){if(h[$(this).attr("name")]==$(j.draggable).text()){this.value=$(j.draggable).text();$(this).css("background-color","green");$(j.draggable).css("background-color","transparent").css("color","transparent")}}});showOrigin.click(function(){showOrigin.hide();showTest.show();$("#text").hide();$("#origin").show()});showTest.click(function(){showTest.hide();showOrigin.show();$("#origin").hide();$("#text").show()})});